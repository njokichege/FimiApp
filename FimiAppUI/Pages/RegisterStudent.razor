@page "/Pages/RegisterStudent"

@inherits RegisterStudentBase

<MudGrid Class="mt-n12 px-5">
    <MudItem xs="9">
        <MudText Typo="Typo.h5" Class="d-flex justify-start">REGISTER STUDENTS</MudText>
    </MudItem>
    <MudItem xs="3" Class="d-flex justify-end">
        <MudIconButton Icon="@Icons.Material.Filled.Message" Color="Color.Inherit" Edge="Edge.End" />
        <MudIconButton Icon="@Icons.Material.Filled.Notifications" Color="Color.Inherit" Edge="Edge.End" />
    </MudItem>
</MudGrid>
<MudDivider DividerType="DividerType.FullWidth" />

<MudGrid Class="pa-10">
    <MudItem xs="5" sm="7">
        <MudPaper>
            <MudForm @ref="registerStudentForm" @bind-IsValid="@success" Validation="@(StudentValidator.ValidateValue)" ValidationDelay="0">
                <MudTextField T="string" Label="First Name" Required="true" RequiredError="First name is required!" />
                <MudTextField T="string" Label="Middle Name" Required="true" RequiredError="Middle name is required!"/>
                <MudTextField T="string" Label="Surname" Required="true" RequiredError="Surname is required!" />
                <MudDatePicker Label="Basic example" OpenTo="OpenTo.Year" />
                <MudAutocomplete T="FormModel" Label="Form" @bind-Value="NewStudentForm" ShowProgressIndicator="true"
                                 SearchFunc="@FormSearch" ToStringFunc="@(e=> e==null?null : $"{e.Form}")" />
                <MudAutocomplete T="StreamModel" Label="Stream" @bind-Value="NewStudentStream" ShowProgressIndicator="true"
                                 SearchFunc="@StreamSearch" ToStringFunc="@(e=> e==null?null : $"{e.Stream}")" />
            </MudForm>
        </MudPaper>
    </MudItem>
    <MudItem xs="5" sm="7">
        <MudPaper>
            <MudForm @ref="registerStudentForm" @bind-IsValid="@success" @bind-Errors="@errors" Validation="@(ParentValidator.ValidateValue)" ValidationDelay="0">
                <MudTextField T="int" Label="National Id" Required="true" RequiredError="National Id is required!" />
                <MudTextField T="string" Label="First Name" Required="true" RequiredError="First name is required!" />
                <MudTextField T="string" Label="Middle Name" Required="true" RequiredError="Middle name is required!" />
                <MudTextField T="string" Label="Surname" Required="true" RequiredError="Surname is required!" />
                <MudTextField T="int" Label="Phone number" Required="true" RequiredError="Phone number is required!" />
            </MudForm>
        </MudPaper>
    </MudItem>
    <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto" OnClick="@(async () => await Submit())">Register</MudButton>
</MudGrid>